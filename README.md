# Работа с Windows server.

## Архитектура и компоненты Windows Server 2012. 

Windows Server является платформой для создания инфраструктуры подключенных приложений, сетей и веб-служб: от рабочей группы до центра обработки данных. Она связывает локальные окружения с Azure, добавляя дополнительные уровни безопасности, а также помогает вам модернизировать приложения и инфраструктуру.

Windows Server – серверная операционная система, на которой построена работа многих центров обработки данных. Windows Server 2012 содержит функции, которые позволяют трансформировать ИТ-среды виртуализации и облачных вычислений с целью сокращения расходов на ИТ и увеличения ценности для бизнеса. В Windows Server 2012 реализованы инновации в области виртуализации, сетевых технологий, систем хранения данных и удобства работы. 

### Архитектура сервера. 

Обычно архитектура сервера подразумевает соединение «клиент-сервер». В нем три класса: одно-, двух- и трехуровневый. Однако специалисты не достигли единого мнения в вопросе разделения этих уровней, потому могут встречаться разные варианты. 

Также есть многоуровневая архитектура «клиент-сервер», серверы приложения взаимодействуют с результатами вычислений друг друга, а также запросами от баз данных и других элементов. В принципе, трехуровневая система – это частный случай многоуровневой. Из плюсов архитектуры выделяется гибкость услуг, возможность комбинировать работу приложений серверов на всех уровнях. Минус такого подхода – сложность обустройства системы.

В типовой сетевой архитектуре используется два базовых компонента – сетевой драйвер и сервис. Драйвер функционирует на уровне ядра ОС, имея возможность пропускать, фильтровать и задерживать трафик для контроля скорости. У сетевой карты может быть активирован режим «прослушки», когда она принимает не только свои, но и чужие пакеты. Это позволяет учитывать весь трафик в сети, а не только тот, что проходит через сервер.

Рассматривая архитектуру файловой системы (ФС), то разработчики стремятся предоставить пользователю возможность работать сразу с нескольких вариантами. На верхнем уровне используется переключатель ФС. Он обеспечивает удобство управления запросами приложений и конкретных ФС, к которым они обращаются. Переключатель преобразует сигналы в формат, воспринимаемый уровнем ФС. Каждый компонент архитектуры ФС - это драйвера, поддерживающий определенную организацию. Переключатель – это базовый модуль, способный обращаться к драйверу. Приложение не наделено такими полномочиями. Для выполнения своих задач ФС обращаются к подсистеме ввода-вывода, образующий другой слой архитектуры. Это составная часть ФС, отвечающая за загрузку и управление всеми модулями низших уровней.

Гипервизор — это процесс, который отделяет операционную систему компьютера и приложения от базового физического оборудования. 
Гиперви́зор или монито́р виртуа́льных маши́н — программа или аппаратная схема, обеспечивающая или позволяющая одновременное, параллельное выполнение нескольких операционных систем на одном и том же хост-компьютере. 

Диспетчер серверов (Server Manager) – это удобный инструмент в операционных системах Windows Server, который позволяет администраторам легко управлять серверами в своей сети. 
Найти "Управление сервером" ("Server management") можно путем: "Пуск" -> "Администрирование" -> "Диспетчер сервера".

Azure — облачная платформа компании Microsoft. Предоставляет возможность разработки, выполнения приложений и хранения данных на серверах, расположенных в распределённых дата-центрах. Облако Azure было анонсировано в октябре 2008 года под кодовым названием «Project Red Dog». 

PowerShell — это расположение хранилища данных, к которому можно получить доступ, например к диску файловой системы в PowerShell. 

Службы удаленных рабочих столов (RDS) – это предпочтительная платформа для создания решений виртуализации для любых нужд конечных пользователей, включая доставку отдельных виртуализированных приложений, обеспечение безопасного доступа к мобильным и удаленным рабочим столам и предоставление конечным пользователям

Storage Spaces — технология виртуализации дискового пространства, которая впервые появилась в Microsoft Windows Server 2012. Его ключевая «фишка» — дать возможность организовать высокодоступную и масштабируемую инфраструктуру хранения по значительно более низкой совокупной стоимости владения (TCO), чем специализированные сторадж-решения.
Идея, реализованная этим механизмом — следующая. Есть сервер под управлением Windows Server 2012. У него есть DAS (directly attached storage) — может быть, в форме дисков SATA или SAS, находящихся в корпусе, а может быть, в виде внешних дисковых полок, подключенных по интерфейсу SAS. Полкам не нужно обеспечивать никакой расширенной обработки, то есть не нужно реализовывать алгоритмы RAID, достаточно отдать JBOD — просто набор дисков, то есть полка в данном случае — это просто железка с блоком питания, салазками и интерфейсом SAS.

### Преимущества и недостатки использования виртуализации в Windows Server 2012.

#### Преимущества виртуализации: 
1.  Экономичность. Избавляет компанию от необходимости покупки дополнительных серверов, предназначенных для решения отдельных задач. 
2.  Гибкость. При увеличении нагрузки на ВМ можно масштабировать ресурсы, чтобы избежать их исчерпания.
3.  Надежная изоляция. Сбои и заражения одной ВМ не отражаются на работоспособности других, расположенных на том же сервере.
4.  Управление версиями. Снимки виртуальной машины позволяют отменить неудачные изменения и быстро вернуться к первоначальному состоянию системы.
5.  Контроль над ресурсами. Виртуализация — технология, которая позволяет распределять вычислительные мощности между виртуальными машинами.

#### Недостатки виртуализации: 
1.  Сбой оборудования приводит к выводу из строя всех серверов.
2.  Управление виртуальной средой требует специальных знаний.
3.  Некоторые решения могут быть связаны с расходами на лицензирование.
4.  При отдельных видах виртуализации без постоянного контроля возникает борьба за ресурсы.

## Управление Active Directory. 

Active Directory («Активный каталог», AD) — службы каталогов корпорации Microsoft для операционных систем семейства Windows Server. 

### Структуру и иерархия Active Directory. 

Active Directory состоит из сервера, контроллера домена, самого домена, дерева доменов, леса доменов. 

Сервер — компьютер, выполняющий определённые роли в домене.

Контроллер домена — сервер, хранящий каталог и обслуживающий запросы пользователей к каталогу. Помимо хранения данных контроллер домена может выступать в качестве одной из FSMO-ролей.

Домен — минимальная структурная единица организации Active Directory.

Дерево доменов — иерархическая система доменов, имеющая единый корень (корневой домен).

Лес доменов — множество деревьев доменов, находящихся в различных формах доверительных отношений.

### Концепции доменов, сайтов и подразделений. 

##### Доменные имена: NetBIOS-имена доменов, DNS-имена доменов. 

_NetBIOS-имена доменов_.

Допустимые символы: Доменные имена NetBIOS могут содержать все буквенно-цифровые символы, за исключением расширенных символов, которые отображаются в списке Запрещенные символы . Имена могут содержать точку, но не могут начинаться с нее.

Запрещенные символы: Запятая (,), Тильда (~), Двоеточие (:), Восклицательный знак (!), Знак "@", Символ решетки (#), Знак доллара ($), Знак процента (%), Крышка (^), Апостроф ('), Точка (.), Круглые скобки (()), фигурные скобки ({}), подчеркивание (_);, Пробел ( ), обратная косая черта (\), косая черта (/)

Правила длины имен: Минимальная длина имени: один символ, Максимальная длина имени: 15 символов

Специальные символы: Точка (.) Символ точки делит имя на идентификатор netBIOS область и имя компьютера. Идентификатор области NetBIOS — это необязательная строка символов, которые обозначают логические сети NetBIOS, запущенные в одной физической сети TCP/IP. Для обеспечения работы NetBIOS между компьютерами они должны иметь одинаковый идентификатор области NetBIOS и уникальные имена компьютера.

_DNS-имена доменов_. 

Допустимые символы: DNS-имена могут содержать только алфавитные символы (A–Z), числовые символы (0–9), знак минус (-) и точку (.). Символы точки допускаются только в том случае, если они используются для разделения компонентов имен стилей доменов.

Запрещенные символы: Запятая (,), Тильда (~), Двоеточие (:), Восклицательный знак (!), Знак "@", Символ решетки (#), Знак доллара ($), Знак процента (%), Крышка (^), Амперсанд (&), Апостроф ('), Точка (.), Круглые скобки (()), фигурные скобки ({}), подчеркивание (_);, Пробел ( ) 

Правила длины имен: Минимальная длина имени: два символа, Максимальная длина имени: 255 символов. 

Корпорация Майкрософт рекомендует, чтобы DNS-имена для внутренних и внешних пространств имен были зарегистрированы в организациях (регистраторах), которые осуществляют координацию деятельности в Интернете. Это относится и к DNS-именам доменов Active Directory, которые не являются поддоменами DNS-имен, зарегистрированных данной организацией. Например, corp.example.com является поддоменом example.com. Регистрация DNS-имени у регистратора позволяет предотвратить конфликт имен. Конфликт имен может возникнуть, если другая организация пытается зарегистрировать то же DNS-имя или если ваша организация объединяется с другой организацией, которая использует то же DNS-имя.

##### Имена сайтов. 

При создании имени нового сайта рекомендуем использовать допустимое DNS-имя. В противном случае сайт будет доступен только там, где используется DNS-сервер Майкрософт. Дополнительные сведения о допустимых DNS-именах описано выше. 

##### Имена подразделений. 

Допустимые символы: Разрешены все символы, даже расширенные символы. Однако хотя компонент «Active Directory — пользователи и компьютеры» позволяет использовать в имени подразделения символы национального алфавита, рекомендуется использовать имена, которые описывают назначение подразделения и являются достаточно короткими, чтобы ими было легко управлять. Протокол LDAP не имеет ограничений, так как CN объекта помещается в кавычки.

Запрещенные символы: Никакие символы не запрещены.

Правила длины имен: Минимальная длина имени: один символ, Максимальная длина имени: 64 символа. 

### Процесс создания и управления пользователями, группами и организационными единицами. 

Создание группы в Windows Server 2012 является одной из основных задач администратора системы. Группы позволяют объединять различных пользователей или компьютеры в одну единицу, что облегчает их управление, назначение прав доступа и выполнение других административных задач. 

Прежде чем приступить к созданию группы, необходимо определить ее цель и состав участников. Группа может быть создана для организации пользователей, имеющих общие привилегии или для управления доступом к определенному ресурсу, например, папке или принтеру. Кроме того, группа может объединять компьютеры с общими параметрами или функциями, такими как серверы или клиенты.

После определения цели группы перейдите к созданию. В Windows Server 2012 есть несколько способов создания группы. Один из наиболее распространенных способов — использование графического интерфейса управления Active Directory Users and Computers (ADUC). Вам понадобятся права администратора для выполнения этой операции. 

_Создание новой группы в Active Directory_. 

Active Directory (AD) является службой каталогов в Windows Server, которая позволяет организовывать и управлять сетевыми ресурсами, такими как пользователи, группы, компьютеры и другие объекты.

Для создания новой группы в Active Directory в Windows Server 2012 следуйте следующим шагам:

1. Войдите на сервер с учетной записью администратора, имеющую соответствующие разрешения на управление Active Directory.
2. Откройте «Управление компьютером» (Computer Management) через «Панель управления» (Control Panel) или через контекстное меню «Мой компьютер» (My Computer).
3. В разделе «Сервисы и приложения» (Services and Applications) выберите «Утилита Active Directory» (Active Directory Users and Computers).
4. В окне «Утилита Active Directory» (Active Directory Users and Computers) выберите нужный домен и контейнер, где вы хотите создать новую группу.
5. Щелкните правой кнопкой мыши на контейнере или организационном объекте, для которого нужно создать новую группу, и выберите «Создание группы» (New Group) из контекстного меню.
6. В открывшемся окне «Создание группы» (New Group) введите имя новой группы и, при необходимости, описание группы.
7. Выберите тип группы: «Обычная» (Security) или «Распределенная» (Distribution).
8. Нажмите кнопку «OK», чтобы создать новую группу.

Теперь вы можете приступить к управлению участниками группы, назначать права доступа и выполнять другие операции с этой группой.

Для выполнения задач, связанных с созданием группы в Windows Server 2012, необходимо войти в систему под учетной записью администратора сервера. Эта учетная запись предоставляет полные права доступа и возможности управления операционной системой.

Для входа в систему как администратор, следуйте следующим шагам:

1. Запустите компьютер и дождитесь загрузки операционной системы Windows Server 2012.
2. На экране приветствия выберите учетную запись администратора (обычно это учетная запись с именем «Administrator»).
3. Введите пароль администратора и нажмите Enter для входа в систему. 

После успешного входа вы будете перенаправлены на рабочий стол операционной системы Windows Server 2012 под учетной записью администратора.

_Открытие Active Directory Users and Computers_. 

Active Directory Users and Computers — это компонент Windows Server 2012, который позволяет администраторам управлять пользователями, группами и компьютерами в Active Directory.

Для открытия Active Directory Users and Computers, выполните следующие шаги:

1. Зайдите на сервер с установленной операционной системой Windows Server 2012.
2. Нажмите на кнопку «Пуск» в левом нижнем углу экрана.
3. В выпадающем меню найдите раздел «Системные инструменты» и нажмите на него.
4. В открывшемся подменю найдите и выберите «Active Directory Users and Computers».

После выполнения указанных шагов откроется окно Active Directory Users and Computers, где вы сможете управлять пользователями, группами и компьютерами в Active Directory. В этом окне вы можете создавать новые группы, добавлять и удалять пользователей, настраивать параметры безопасности и многое другое.

## Безопасность Windows Server 2012. 

### Основные функции безопасности в Windows Server 2012, такие как брандмауэр, политика безопасности и шифрование. Важность регулярных обновлений безопасности и аудита. 

В компьютерных сетях _брандмауэр (файрвол)_ обнаруживает и блокирует сетевой трафик на основе предварительно определенных или динамических правил. Они защищают сети и устройства от вторжения потенциально опасных киберпреступников, которые могут заражать устройства и использовать их в злонамеренных целях.

_Брандмауэр_ проверяет входящие пакеты на соответствие следующему набору правил:

1. Если пакет соответствует стандартам, заданным правилами, то брандмауэр передает его протоколу TCP/IP для дальнейшей обработки.
2. Пакет не соответствует стандартам, заданным в правилах.
В этом случае брандмауэр отклоняет пакет. Если включено ведение журнала, в файле журнала брандмауэра создается соответствующая запись.

Список разрешенного трафика заполняется одним из следующих способов.

1. Автоматически. Когда защищенный брандмауэром компьютер инициирует соединение, брандмауэр добавляет в список запись, чтобы разрешить ответ. Ответ считается запрашиваемым трафиком, и ничего настраивать не требуется.

2. Вручную: администратор настраивает исключения для брандмауэра. Это открывает доступ к определенным программам или портам на компьютере. В этом случае компьютер принимает весь входящий трафик, выполняя роль сервера, прослушивателя или однорангового узла. Необходимо выполнить настройку для подключения к SQL Server.

Выбор стратегии брандмауэра является более сложной задачей и не сводится лишь к открытию или закрытию портов. При выборе стратегии брандмауэра для предприятия необходимо обязательно рассмотреть все доступные правила и параметры конфигурации.

_Политика безопасности_ – это набор правил, которые применяются ко всем функциям компьютеров и других коммуникационных ресурсов, принадлежащих организации. На практике правила создаются службой безопасности предприятия, администратором безопасности или компаниями, которые предоставляют услуги по защите данных.

Чтобы разработать свою политику безопасности, нужно четко определить цели безопасности. Цели – это конкретные шаги, которые в итоге реализуют правила ИБ. Эти шаги включают в себя обучение сотрудников и внедрение необходимого программного обеспечения, оборудования для соблюдения правил. Кроме того, когда вносятся изменения в вычислительную среду, нужно обновлять политику безопасности. Это необходимо для того, чтобы специалисты могли определить все новые риски, которые касаются нововведений.

Для создания и выполнения политики безопасности у руководителя должны быть четкие цели. Цели безопасности относятся к одной или нескольким из следующих категорий:

1. Защита ресурсов. Схема защиты ресурсов должна гарантировать, что только авторизованные пользователи могут получить доступ к объектам системы. Возможность защиты всех типов системных ресурсов является основным показателем ее прочности. Служба безопасности должна определить разные категории пользователей, которые могут получить доступ к системе. Кроме того, следует продумать, какую авторизацию доступа нужно предоставить этим группам юзеров в рамках создания политики информационной безопасности.

2. Аутентификация – это проверка того, что ресурс (человек или машина) на другом конце сеанса действительно соответствует своим характеристикам. 

Традиционно для аутентификации используются пароли и имена пользователей, цифровые сертификаты или параметры биометрии человека (отпечатки пальцев, скан лица). Когда вы связываете свою систему с общедоступной сетью, такой как Интернет, аутентификация пользователя принимает новые параметры. Важным различием между Интернетом и обычной локальной сетью является надежность. Интрасеть позволяет контролировать весь входящий трафик и действия пользователей, в то время как Интернет является средой возможной атаки злоумышленника.

3. Авторизация – это уверенность в том, что лицо или компьютер на другом конце сеанса имеют разрешение на выполнение запроса. Авторизация подразумевает, что существует риск получения доступа к системным ресурсам со стороны. Как правило, авторизация выполняется в контексте аутентификации.

У проверенных пользователей могут быть разные типы разрешений на основе их уровней авторизации.

4. Целостность – это уверенность в том, что поступающая информация такая же, как и то, что было отправлено. Понимание целостности требует понимания понятий целостности данных и целостности системы.

5. Аудит безопасности – это мониторинг всех событий, которые связаны с получением доступа к сети. Всего рекомендуется использовать два типа записей – с указанием успешных авторизаций и подозрительных подключений. Неудачные попытки получения доступа являются первым сигналом попыток взлома.

Если уполномоченный сотрудник решил ознакомиться с результатами работы другого работника, такое действие должно быть внесено в журнал безопасности. Также нельзя выносить конфиденциальные данные за пределы охраняемого объекта. В случае необходимости передать бумажные копии нужно пользоваться услугами специальных курьерских компаний, которые занимаются передачей засекреченных данных между несколькими объектами. 

6. Конфиденциальность. Секретные данные должны сохраняться. Злоумышленник не должен знать об их существовании. Конфиденциальность имеет решающее значение для обеспечения общей безопасности данных предприятия. Она достигается с помощью таких принципов:

* _Шифрование_ с использованием цифровых сертификатов.
* Защищенное соединение Secure Socket Layer (SSL).
* Работа с Интернетом через виртуальные частные сети (VPN). Все это помогает обеспечить конфиденциальность при передаче данных через ненадежные сети. Политика безопасности организации должна включать детальное описание шагов, выполнение которых обеспечивает ИБ и конфиденциальность данных в локальной и глобальной сети.

_Шифрование_ - обратимое преобразование информации в целях сокрытия от неавторизованных лиц с предоставлением в это же время авторизованным пользователям доступа к ней. Главным образом, шифрование служит для соблюдения конфиденциальности передаваемой информации. 

_Шифрование_ — это технический процесс, в ходе которого информация преобразуется в секретный код, скрывая таким образом данные, которые вы отправляете, получаете или храните. По сути, применяется такой алгоритм кодирования данных, чтобы только сторона-получатель, имеющая ключ дешифрования, могла расшифровать их. Расшифрованное сообщение, содержащееся в нешифрованном файле, называется открытым текстом, а сообщение в зашифрованном виде — зашифрованным текстом.

## Управление хранилищем. 

### Типы файловых систем, поддерживаемых Windows Server 2012.

1. _FAT_ является наиболее упрощенной из файловых систем. Файловая система FAT характеризуется таблицей выделения файлов (FAT), которая на самом деле является таблицей, которая находится в самом "верхней" части тома. Для защиты тома в случае повреждения одной из них хранятся две копии FAT. Кроме того, таблицы FAT и корневой каталог должны храниться в фиксированном расположении, чтобы файлы загрузки системы могли правильно находиться.

Диск в формате FAT выделяется в кластерах, размер которого определяется размером тома. При создании файла в каталоге создается запись и устанавливается первый номер кластера, содержащий данные. Эта запись в таблице FAT указывает, что это последний кластер файла, или указывает на следующий кластер.

Обновление таблицы FAT очень важно, а также требует много времени. Если таблица FAT не обновляется регулярно, это может привести к потере данных. Это требует много времени, так как заголовки чтения диска должны быть перемещены в логическую дорожку диска при каждом обновлении таблицы FAT.

В структуре каталогов FAT нет организации, и файлам предоставляется первое открытое расположение на диске. Кроме того, FAT поддерживает только атрибуты файлов только для чтения, скрытые, системные и архивные.

2. Файловая система _HPFS_ впервые была представлена в OS/2 1.2, чтобы обеспечить больший доступ к более крупным жестким дискам, которые затем появились на рынке. Кроме того, новой файловой системе необходимо было расширить систему именования, организацию и безопасность для растущих потребностей рынка сетевых серверов. HPFS поддерживает организацию каталогов FAT, но добавляет автоматическую сортировку каталога на основе имен файлов. Имена файлов расширяются до 254 двухбайтового символа. HPFS также позволяет файлу состоять из "данных" и специальных атрибутов, чтобы обеспечить повышенную гибкость с точки зрения поддержки других соглашений об именовании и безопасности. Кроме того, единица распределения меняется с кластеров на физические секторы (512 байт), что сокращает потерянное место на диске.

В HPFS записи каталога содержат больше сведений, чем в fat. Как и файл атрибутов, он содержит сведения об изменении, создании и дате и времени доступа. Вместо того чтобы указывать на первый кластер файла, записи каталога в HPFS указывают на FNODE. FNODE может содержать данные файла или указатели, которые могут указывать на данные файла или другие структуры, которые в конечном итоге будут указывать на данные файла.

HPFS пытается выделить как можно больше файлов в смежных секторах. Это делается для повышения скорости при последовательной обработке файла.

HPFS упорядочивают диск по 8 МБ, и по возможности файл содержится в одной из этих полос. Между этими полосами находятся точечные рисунки выделения по 2 КБ, которые отслеживают, какие секторы в диапазоне были выделены и не были выделены. Чередование повышает производительность, так как для определения места хранения файла не нужно возвращаться к логическому верхнему элементу диска (обычно это цилиндр 0), а к ближайшей растровой карте выделения полосы.

3. _NTFS_ (аббревиатура от англ. new technology file system — «файловая система новой технологии») — стандартная файловая система для семейства операционных систем Windows NT фирмы Microsoft. NTFS поддерживает хранение метаданных.

С точки зрения пользователя NTFS продолжает упорядочивать файлы в каталоги, которые, как и HPFS, сортируются. Однако, в отличие от FAT или HPFS, на диске нет "специальных" объектов и нет зависимости от базового оборудования, например 512-байтовых секторов. Кроме того, на диске нет специальных расположений, таких как таблицы FAT или супер блоки HPFS.

Чтобы обеспечить надежность NTFS, были решены три основные области: возможность восстановления, удаление неустранимых сбоев одного сектора и горячее исправление.

NTFS — это восстанавливаемая файловая система, так как она отслеживает транзакции в файловой системе. При выполнении CHKDSK в FAT или HPFS проверяется согласованность указателей в каталоге, выделении и файловых таблицах. В NTFS журнал транзакций с этими компонентами сохраняется, поэтому CHKDSK требуется откат транзакций только до последней точки фиксации, чтобы восстановить согласованность в файловой системе.

Если в FAT или HPFS происходит сбой сектора, который является расположением одного из специальных объектов файловой системы, произойдет сбой одного сектора. NTFS позволяет избежать этого двумя способами: во-первых, не используя специальные объекты на диске и отслеживая и защищая все объекты, которые находятся на диске. Во-вторую, в NTFS хранятся несколько копий (число зависит от размера тома) главной файловой таблицы.

### Концепции квотирования на дисковое пространство и управления дисковым пространством. 

##### Концепции квотирования на дисковое пространство. 

Чтобы не дать пользователям возможности захватывать слишком большие области дискового пространства, многопользовательские операционные системы часто предоставляют механизм навязывания дисковых квот. Замысел заключается в том, чтобы системный администратор назначал каждому пользователю максимальную долю файлов и блоков, а операционная система гарантировала невозможность превышения этих квот. 

Когда пользователь открывает файл, определяется местоположение атрибутов и дисковых адресов, и они помещаются в таблицу открытых файлов, находящуюся в оперативной памяти. В числе атрибутов имеется запись, сообщающая о том, кто является владельцем файла. Любое увеличение размера файла будет засчитано в квоту владельца.

Когда в таблице открытых файлов делается новая запись, в нее включается указатель на запись квоты владельца, облегчающий поиск различных лимитов. При каждом добавлении блока к файлу увеличивается общее число блоков, числящихся за владельцем, и оно сравнивается как с назначаемым, так и с жестким лимитом. Назначаемый лимит может быть превышен, а вот жесткий лимит — нет. Попытка добавить что-нибудь к файлу, когда достигнут, жесткий лимит, приведет к ошибке. Аналогичные сравнения проводятся и для количества файлов, чтобы запретить пользователю дробление i-узлов.

Когда пользователь пытается зарегистрироваться, система проверяет квоту файлов на предмет превышения назначенного лимита как по количеству файлов, так и по количеству дисковых блоков. Когда какой-либо из лимитов превышен, выводится предупреждение и счетчик оставшихся предупреждений уменьшается на единицу. Если когда-нибудь счетчик дойдет до нуля, это значит, что пользователь сразу проигнорировал слишком много предупреждений и ему не будет предоставлена возможность зарегистрироваться. Для повторного разрешения на регистрацию пользователю нужно будет обращаться к системному администратору.

Назначаемый лимит обладает особенностью, которая позволяет пользователям превысить назначенные им лимиты в течение сеанса работы при условии, что они ликвидируют превышение перед выходом из системы. Жесткий лимит, не может быть превышен ни при каких условиях.

##### Управление дисковым пространством. 

Обычно файлы хранятся на диске, поэтому управление дисковым пространством является основной заботой разработчиков файловой системы. Для хранения файла размером n байт возможно использование двух стратегий: выделение на диске n последовательных байтов или разбиение файла на несколько непрерывных блоков. Такая же дилемма между чистой сегментацией и страничной организацией присутствует и в системах управления памятью.

Как уже было показано, при хранении файла в виде непрерывной последовательности байтов возникает очевидная проблема: вполне вероятно, что по мере увеличения его размера потребуется его перемещение на новое место на диске. Такая же проблема существует и для сегментов в памяти, с той лишь разницей, что перемещение сегмента в памяти является относительно более быстрой операцией по сравнению с перемещением файла с одной дисковой позиции на другую. По этой причине почти все файловые системы разбивают файлы на блоки фиксированного размера, которые не нуждаются в смежном расположении.

##### Преимущества и недостатки использования RAID-массивов.

RAID (redundant array of independent disks, избыточный массив независимых дисков) — это технология, состоящий из нескольких дисков для хранения данных. Накопители связаны друг с другом, чтобы повысить надежность и производительность. В основном используются жесткие диски, но существует тенденция также использовать SSD накопители.

RAID — это распространенный метод защиты данных приложений на жестких дисках и твердотельных накопителях, причем в различных типах RAID уровень защиты уравновешивается ценой. Чем выше уровень защиты, тем выше стоимость. По мере развития систем хранения данных количество уровней RAID увеличивалось.

RAID — это способ объединения отдельных физических дисков в массив RAID. Массив RAID представляет все физические диски как один логический диск на вашем сервере. Такой диск называется логическим номером устройства, или LUN.

Улучшение производительности и доступности RAID-массива позволило сохранить его использование даже после появления новых, альтернативных технологий. Кодирование стирания и твердотельные накопители стали надежными — хотя и более дорогими — альтернативами, а с увеличением емкости хранилища возрастает и вероятность ошибок в массивах RAID. Тем не менее производители систем хранения продолжают поддерживать уровни RAID в своих массивах хранения данных.

_Чтобы полностью понять RAID и его преимущества, важно разделить различные уровни RAID и то, что каждый из них делает лучше всего._

Уровни RAID можно разделить на три категории: стандартные, нестандартные и вложенные. Стандартные уровни RAID состоят из основных типов RAID с номерами от 0 до 6. Нестандартный уровень RAID устанавливается в соответствии со стандартами конкретной компании или проекта с открытым исходным кодом. К нестандартным RAID относятся RAID 7, адаптивный RAID, RAID S и Linux md RAID 10. Вложенный RAID относится к комбинациям уровней RAID, например, RAID 10 (RAID 1+0) и RAID 50 (RAID 5+0).

Используемый вами уровень RAID зависит от типа приложения, которое вы запускаете на своем сервере. RAID 0 — самый быстрый, RAID 1 — самый надежный, а RAID 5 — хорошее сочетание обоих. Выбор лучшего RAID-массива для вашей организации может зависеть от требуемого уровня избыточности данных, длительности периода хранения, количества дисков, с которыми вы работаете, а также от того, какое значение вы придаете защите данных по сравнению с оптимизацией производительности.

_RAID 0_ также называется чередованием дисков. Этот метод включает равномерное разделение данных между двумя или более устройствами хранения (HDD или SSD). Цель состоит в том, чтобы повысить производительность, так как такая организация данных позволяет быстрее читать и записывать файлы.

RAID 0 является наиболее доступным типом и его довольно легко настроить. Однако такой массив не является отказоустойчивым, и его не следует использовать для критически важных данных. Проблемы на любом из дисков могут привести к полной потере данных в массиве.

Преимущества RAID 0: Повышенная производительность чтения и записи, Использование полной мощности накопителей, Легко реализуется.
Недостатки RAID 0: Нет отказоустойчивости.

_RAID 1_ (зеркальное отображение диска) является отказоустойчивым, поскольку он дублирует данные путем одновременной записи на два устройства хранения. Следовательно, каждый диск имеет точную копию на другом диске.

Наличие конфигурации RAID 1 обеспечивает защиту от потери данных. Если проблема возникает с одним диском, контроллер использует зеркальный диск для восстановления данных и непрерывной работы. Также увеличивает производительность, поскольку позволяет системам одновременно читать с обоих дисков. Тем не менее, запись занимает больше времени, поскольку данные дублируются на несколько дисков.

Преимущества RAID 1: Повышенная скорость чтения, Отказоустойчивость, Легко реализовать. 
Недостатки RAID 1: Используется только половина емкости хранилища. 

_RAID 5_ обеспечивает высокую производительность и надежность. Является наиболее распространенным и безопасным RAID массивом, чтения данных выполняются очень быстро, но запись данных несколько медленнее.

RAID 5 использует чередование дисков и четность, что делает его наиболее популярным вариантом. Raid 5 требует как минимум трех (3) дисков, на которых данные чередуются, но не дублируются. В качестве защиты от выхода из строя одного из диска он использует четность, распределенную по всем дискам, для восстановления данных при необходимости.

Преимущества RAID 5: Быстрое чтения, Единый доступ ко всем данным, Отказоустойчивость.
Недостатки RAID 5: Требуется больше времени для восстановления данных, Сложнее реализовать. 

_RAID 10_ сочетает в себе RAID 0 и RAID 1 как минимум с четырьмя дисками. В RAID 10 два диска чередуются и зеркально отражаются на двух других дисках, создавая единый массив. Такая конфигурация выигрывает высокой производительностью (RAID 0) и отказоустойчивостью (RAID 1).

В случае отказа диска RAID 10 обеспечивает быстрое восстановление благодаря избыточности данных. Однако это имеет свою цену. Этот метод более дорогой и сложный в настройке по сравнению с другими RAID. Кроме того, он фактически использует половину своей емкости хранения.

Преимущества RAID 10: Высокая производительность, Отказоустойчивость, Быстрое время восстановления. 
Недостатки RAID 10: Дорого (требуется больше места для хранения), Ограниченная масштабируемость. 

Все уровни RAID, кроме RAID 0, обеспечивают защиту от сбоя одного диска. Для надежности все равно необходимо создавать резервные копии данных, хранящихся в массиве RAID.

## Управление службами и приложениями. 

### Различные типы служб в Windows Server 2012 и их функции.

Службы сертификатов Active Directory:

Центр сертификации ADCS-Cert-Authority
Веб-служба политик регистрации сертификатов ADCS-Enroll-Web-Pol
Веб-служба регистрации сертификатов ADCS-Enroll-Web-Svc N
Служба регистрации в центре сертификации через Интернет ADCS-Web-Enrollment N
Служба подачи заявок на сетевые устройства ADCS-Device-Enrollment N
Сетевой ответчик ADCS-Online-Cert N.

Active Directory Rights Management:

Сервер управления правами Active Directory ADRMS-Server N
Поддержка федерации удостоверений ADRMS-Identity N. 

Файловые службы и службы хранилища:

Файловые службы и службы iSCSI Файловые службы N
Файловый сервер FS-FileServer N
Служба BranchCache для сетевых файлов FS-BranchCache N
Дедупликация данных Дедупликация FS-Data-Deduplication N
Пространства имен DFS Пространство имен FS-DFS-Namespace N
DFS Replication Репликация FS-DFS N
Диспетчер ресурсов файлового сервера FS-Resource-Manager N
Служба агента VSS файлового сервера FS-VSS-Agent N
Целевой сервер iSCSI iSCSITarget-Server N
Поставщик служба хранилища iSCSI (поставщики оборудования VDS и VSS) iSCSITarget-VSS-VDS N
Сервер для NFS FS-NFS-Service N
Рабочие папки FS-SyncShareService N
Службы хранилища служба хранилища-Services Y. 

Службы печати и документов:

Сервер печати Сервер печати N
Служба LPD Print-LPD-Service N. 

Удаленный доступ:

DirectAccess и VPN (RAS)
DirectAccess-VPN N
Маршрутизация
Прокси-сервер веб-приложения. 

Службы удаленного рабочего стола:

Брокер Подключение удаленного рабочего стола* RDS-Подключение ion-Broker N
Лицензирование удаленных рабочих столов Лицензирование RDS N
Узел виртуализации удаленных рабочих столов Виртуализация RDS-Virtualization N Веб-сервер (IIS):
Веб-сервер
Основные возможности HTTP Web-Common-Http N
Документ по умолчанию Web-Default-Doc N
Просмотр каталога Просмотр веб-Dir- N
Ошибки HTTP Ошибки Web-Http N
Статическое содержимое Веб-статический контент N
Перенаправление HTTP Веб-http-redirect N
Публикация WebDAV Веб-DAV-Publishing N
Работоспособность и диагностика Веб-работоспособности N
Ведение журнала HTTP Ведение журнала веб-http N
Настраиваемое ведение журнала Ведение веб-пользовательских журналов N
Средства ведения журнала Библиотеки веб-журналов N
Ведение журнала ODBC Ведение журнала web-ODBC N
Монитор запросов Веб-запрос-Monitor N
Трассировка Веб-http-трассировка N
Производительность веб-приложений N
Сжатие статического содержимого Веб-Stat-Compression N
Функция сжатия динамического содержимого Веб-Dyn-Compression N
Безопасность Веб-безопасность N
Фильтрация запросов Фильтрация веб-сайтов N
Обычная проверка подлинности Web-Basic-Auth N
Централизованная поддержка SSL-сертификатов Web-CertProvider N
Проверка подлинности с сопоставлением сертификата клиента Web-Client-Auth N
Дайджест-проверка подлинности Веб-дайджест-аутентификация N
Аутентификация IIS с сопоставлением сертификата клиента Web-Cert-Auth N
Ограничения IP-адресов и доменов Безопасность веб-IP-адресов N
Авторизация URL-адресов Веб-URL-проверка подлинности N
Проверка подлинности Windows Веб-Windows-Auth N
Разработка приложений Web-App-Dev N
Расширяемость платформы .NET версии 3.5 Web-Net-Ext N
Расширяемость .NET 4.6 Web-Net-Ext45 N
Инициализация приложения Web-AppInit N
ASP Веб-ASP N
ASP.NET 3.5 Web-Asp-Net N
ASP.NET 4.6 Web-Asp-Net45 N
CGI Web-CGI N
Расширения ISAPI Web-ISAPI-Ext N
Фильтры ISAPI Web-ISAPI-Filter N
Включения на стороне сервера Веб-включает в себя N Протокол WebSocket Web-WebSockets N FTP-сервер Web-Ftp-Server N Служба FTP Веб-ftp-service N
Расширяемость FTP Web-Ftp-Ext N
Средства управления Web-Mgmt-Tools N
Совместимость управления IIS 6 Web-Mgmt-Compat N
Совместимость метабазы IIS 6
Веб-метабаза N
Инструменты для работы со сценариев IIS 6 Web-Lgcy-Scripting N
Совместимость WMI IIS 6 Веб-WMI N
Сценарии и средства управления IIS Средства веб-скриптов N
Служба управления Web-Mgmt-Service N. 

Службы обновления Windows Server:

Подключение тивность WID UpdateServices-WidDB N
Службы WSUS UpdateServices-Services N
Подключение тивность SQL Server UpdateServices-DB. 

##### Ключевые функции Windows Server 2012. 

1. Централизованная консоль управления предоставляет единую точку доступа для контроля всех аспектов развертывания удаленных рабочих столов и управления ими.
2. Упрощенное развертывание и обновление инфраструктуры виртуальных рабочих столов, как в рамках пулов, так и для персонального использования.
3. SMB streaming, который предоставляет для Hyper-V производительность, сравнимую с SAN, но при более низкой стоимости.
4. Расширенная функциональность DirectAccess объединена со службой маршрутизации и удаленного доступа (RRAS), и формирует службу унифицированного удаленного доступа. Это сочетание позволяет использовать DirectAccess и VPN совместно. Так же применена упрощенная модель развертывания DirectAccess, ориентация на ActiveDirectory.
5. Улучшения в функционале BranchCache: упрощенная модель развертывания, управляемость, и масштабируемость на несколько серверов, которые делают его готовым к использованию вместе с облачными средами.
6. RemoteFX для WAN теперь дает пользователям удаленных рабочих столов возможность работать в полноценной среде даже через WAN-соединения, включая использование USB-портов, поддержку интерфейсов Aero и 3D, возможности мультимедиа, а так же использование сенсорного экрана с технологией Multi-touch. А функция RemoteFX Network Auto Detect определяет ширину доступной полосы пропускания между клиентом и сервером, и автоматически оптимизирует работу.
7. Персонализация удаленных рабочих столов при помощи поддержки диска пользовательского профиля (User Profile Disk), в котором хранятся персональные настройки пользователя и кэш приложений между подключениями.
8. Улучшенная инфраструктура обеспечения безопасности одновременно использует классификацию данных и централизованные политики доступа, а так же позволяет проводить аудит доступа к данным. Так же может применяться высокопроизводительное шифрование - выборочное на основе классификации файлов или полное, на уровне жестких дисков.
9. Определение принадлежности устройства пользователю позволяет администраторам определять основные устройства или группы устройств для пользователей или их групп. При их использовании пользователям будут доступны их перемещаемый профиль и перенаправленные папки. При входе с других устройств, доступен будет только локальный профиль, который автоматически удалится после выхода. 

### Процесс установки, настройки и управления службами и приложениями. 

Приложение является широко используемым термином в вычислениях, в Configuration Manager это означает что-то конкретное. Представьте себе приложение как поле. Это поле содержит один или несколько наборов файлов установки для пакета программного обеспечения (известного как тип развертывания), а также инструкции по развертыванию программного обеспечения.

При развертывании приложения на устройствах требования определяют тип развертывания, который Configuration Manager установить на устройстве.

_Тип развертывания_.

Если приложение является полем, тогда типом развертывания является набор содержимого в поле. Приложению требуется по крайней мере один тип развертывания, так как оно определяет, как установить приложение. Можно использовать несколько типов развертывания для настройки разного содержимого и программы установки для одного приложения.

Например, для бизнес-приложение astoria. Разработчики приложений предоставляют следующие способы установки приложения:

1. Пакет установщика Windows для полной функциональности на Windows 10 устройствах
2. Пакет App-V для использования в ферме серверов терминалов
3. Веб-приложение для мобильных пользователей - создаст одно приложение для Astoria в Configuration Manager. Приложение определяет высокоуровневые метаданные о приложении, которые являются общими для всех методов установки и платформ. 
Затем вы создаете три типа развертывания для доступных методов установки и развертываете приложение для всех пользователей. На основе требований и других конфигураций типов развертывания Configuration Manager определяет правильный метод в каждом варианте использования.

_Требования_. 

Configuration Manager оценивает требования, чтобы определить, устанавливается ли приложение и какой-либо из его типов развертывания. Затем он определяет правильный тип развертывания, с помощью которого следует установить приложение. Каждые семь дней клиент Configuration Manager по умолчанию пересматривает правила требований, чтобы определить соответствие требованиям в соответствии с параметром "Запланировать повторную оценку для развертываний".

_Глобальные условия_. 

При использовании требований с определенным типом развертывания в одном приложении можно также создавать глобальные условия. Эти условия представляют собой библиотеку предопределенных требований, которую можно использовать с любым приложением и типом развертывания. Configuration Manager включает набор встроенных глобальных условий или можно создать собственные.

_Имитированное развертывание_. 

Имитация развертывания оценивает требования, метод обнаружения и зависимости для приложения. Клиент сообщает результаты без фактической установки приложения.

_Цель развертывания_ указывает, является ли приложение развертывания обязательным или доступным:

1. Клиент автоматически устанавливает требуемое развертывание в соответствии с заданным расписанием. Если приложение не скрыто, пользователь может отслеживать состояние его развертывания. Они также могут использовать Центр программного обеспечения для установки приложения до наступления крайнего срока.
2. Если приложение развернуто для пользователя, как доступно, он увидит его в Центре программного обеспечения и может запросить его по запросу.

_Метод обнаружения_ нужен, чтобы определить, установлено ли на устройстве приложение. Если метод обнаружения указывает, что приложение установлено, Configuration Manager не пытается установить его повторно. 

_Зависимости_ определяют один или несколько типов развертывания из другого приложения, которое клиент должен установить перед установкой этого типа развертывания.

_Замены_. Configuration Manager позволяет обновлять или заменять существующие приложения с помощью отношения замены. При замене приложения вы указываете новый тип развертывания, чтобы заменить тип развертывания заменяемого приложения. Вы также можете решить, следует ли обновить или удалить замененное приложение, прежде чем клиент установит заменяющее приложение.

_Управление, ориентированное на пользователя_. 

Configuration Manager приложения поддерживают управление, ориентированное на пользователей, что позволяет связывать конкретных пользователей с определенными устройствами. Вместо того, чтобы запоминать имя устройства пользователя, развертывайте приложения для пользователя и на устройстве. Эта функция позволяет убедиться, что наиболее важные приложения всегда доступны на каждом из устройств пользователя. Если пользователь получает новый компьютер, Configuration Manager автоматически устанавливает приложения на устройстве.

_Группа приложений_. 

Создайте группу приложений, которые можно отправлять пользователю или коллекции устройств в виде одного развертывания. Метаданные, указанные для группы приложений, рассматриваются в Центре программного обеспечения как единая сущность. Вы можете упорядочить приложения в группе, чтобы клиент устанавливал их в определенном порядке.

Configuration Manager позволяет развернуть приложения следующих типов:

Установщик Windows (MSI)
Пакет приложений для Windows и пакеты приложений (appx, appxbundle, msix, msixbundle)
Пакет приложения для Windows в Магазине Майкрософт
Установщик скриптов для сторонних установщиков и оболочки скриптов
Microsoft App-V версии 4 и 5
macOS
Последовательность задач развертывания без ОС для сложных приложений. 

При управлении устройствами с помощью Configuration Manager локального управления устройствами, есть следующие типы приложений:

пакет приложения Windows Phone (xap)
Windows Phone пакет приложения в Магазине Майкрософт
Установщик Windows через MDM (MSI)
Веб-приложение. 

_Пакеты и программы_. Configuration Manager продолжает поддерживать пакеты и программы, которые использовались в предыдущих версиях продукта. 

### Устранения неполадок в службах и приложениях. 

1. Определение проблемы путем изучения журнала событий на наличие определенных ошибок. Откройте Просмотр событий из панели управления>Административные средства. Найдите события агента клиентский компонент Центра обновления Windows в системном журнале и ошибки в журналах системы и приложений примерно в то же время, когда были применены обновления. Разверните дерево Просмотр событий в журналы >приложений и служб Microsoft>WindowsUpdateClient>> Operational. Определите обновление, которое не удалось установить, и код сбоя. Найдите ошибку и ее разрешение в разделе Общие ошибки клиентский компонент Центра обновления Windows или клиентский компонент Центра обновления Windows коды ошибок по компонентам.

2. Проверка состояния ожидания перезагрузки. Если компьютер не был перезагружен, перезагрузите компьютер.

3. Обновление стека служб. Установите последнее обновление стека обслуживания.

4. Запуск средства устранения неполадок из клиентского компонент Центра обновления для Windows. 

* Скачайте средство устранения неполадок и выберите Открыть или Сохранить во всплывающем окне. (Если вы наберете кнопку Сохранить, вам потребуется открыть средство устранения неполадок в расположении сохранения.)
* Нажмите кнопку Далее, чтобы запустить средство устранения неполадок, и выполните действия по выявлению и устранению проблем.
* После завершения работы средства устранения неполадок попробуйте запустить клиентский компонент Центра обновления Windows еще раз. На кнопке Пуск выберите Параметры>Обновление & безопасности>клиентский компонент Центра обновления Windows>Проверить наличие обновлений и установить все доступные обновления.
* Если применимо, сбросьте компоненты обновления Windows.

5. Используйте DISM или средство проверки готовности к обновлению системы из Центра обновления Windows.